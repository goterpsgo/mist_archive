/*
Product Name: dhtmlxTreeView 
Version: 5.0 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.0",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(c,d,e){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(e)=="string"){b.innerHTML=e}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var i=0;i<f.length;i++){if(i>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[i]}else{d.push(f[i])}}h=d[0];for(var i=1;i<d.length;i++){e.push(d[i])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefined"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(i){switch(i){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var k=f.getTimezoneOffset();var j=Math.abs(Math.floor(k/60));var g=Math.abs(k)-j*60;return(k>0?"-":"+")+e(j)+":"+e(g);default:return i}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,s,x){if(s==null||typeof(s)=="undefined"){s=window.dhx4.dateFormat[window.dhx4.dateLang]}if(x==null||typeof(x)=="undefined"){x=window.dhx4.dateStrings[window.dhx4.dateLang]}s=s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var u=[];var j=[];s=s.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":j.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":j.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":j.push(e);return"(\\d{1,2})";case"%Y":j.push(e);return"(\\d{4})";case"%a":j.push(e);return"([a|p]m)";case"%A":j.push(e);return"([A|P]M)";case"%u":j.push(e);return"(\\d{1,6})";case"%P":j.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var y=new RegExp(s,"i");var l=g.match(y);if(l==null||l.length-1!=j.length){return"Invalid Date"}for(var b=1;b<l.length;b++){u.push(l[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var m={};var i={};for(var b=0;b<j.length;b++){if(typeof(c[j[b]])!="undefined"){var d=c[j[b]];if(!m[d]){m[d]=[];i[d]=[]}m[d].push(u[b]);i[d].push(j[b])}}u=[];j=[];for(var b=1;b<=7;b++){if(m[b]!=null){for(var o=0;o<m[b].length;o++){u.push(m[b][o]);j.push(i[b][o])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var n=function(k,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==k){return f}}return -1};for(var b=0;b<u.length;b++){switch(j[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(u[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[j[b]]](Number(u[b])+(j[b]=="%m"||j[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=n(u[b].toLowerCase(),x[{"%M":"monthShortName","%F":"monthFullName"}[j[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(u[b])){var t=Number(u[b]);a.setFullYear(t+(t>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(u[b])){var t=Number(u[b]);if(t<=12&&t>=0){a.setHours(t+(n("pm",u)>=0?(t==12?0:12):(t==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=u[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,d,c){if(typeof d.status=="undefined"||d.status<400){xml=(!d.responseXML)?dhx4.ajax.parse(d.responseText||d):(d.responseXML||d);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(f){return[]}}else{var d=[];var g;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(g=b.iterateNext()){d.push(g)}return d}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(a,b,c,e,g,j,d){var i=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var f=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(e==true){i.onreadystatechange=function(){if((i.readyState==4)||(f==true&&i.readyState==3)){if(i.status!=200||i.responseText==""){if(!dhx4.callEvent("onAjaxError",[{xmlDoc:i,filePath:b,async:e}])){return}}window.setTimeout(function(){if(typeof(g)=="function"){g.apply(window,[{xmlDoc:i,filePath:b,async:e}])}if(j!=null){if(typeof(j.postData)!="undefined"){dhx4.ajax.postLong(j.url,j.postData,g)}else{dhx4.ajax.getLong(j.url,g)}}g=null;i=null},1)}}}if(a=="GET"){b+=this._dhxr(b)}i.open(a,b,e);if(d!=null){for(var h in d){i.setRequestHeader(h,d[h])}}else{if(a=="POST"||a=="PUT"||a=="DELETE"){i.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){c=null}}}i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.send(c);if(e!=true){if((i.readyState==4)||(f==true&&i.readyState==3)){if(i.status!=200||i.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:i,filePath:b,async:e}])}}}return{xmlDoc:i,filePath:b,async:e}},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(n,o,p){if(arguments.length==2){p=o;o=null}var m=null;if(arguments.length==3){p=arguments[2]}if(typeof(n)=="string"){var l=n.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var s=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(s.test(l.replace(/^<\?xml[^\?]*\?>\s*/,""))){m=dhx4.ajax.parse(n);if(m!=null){m=this[this._dhxdataload.xmlToJson].apply(this,[m])}}if(m==null&&(l.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||l.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){m=dhx4.s2j(l)}if(m==null){this.callEvent("onXLS",[]);var j=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var l=this._dhxdataload.onBeforeXLS.apply(this,[n]);if(l!=null&&typeof(l)=="object"){if(l.url!=null){n=l.url}if(l.params!=null){for(var q in l.params){j.push(q+"="+encodeURIComponent(l.params[q]))}}}}var r=this;var i=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=r[r._dhxdataload.xmlToJson].apply(r,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){r[r._dhxdataload.initObj].apply(r,[k,n])}r.callEvent("onXLE",[]);if(p!=null){if(typeof(p)=="function"){p.apply(r,[])}else{if(typeof(window[p])=="function"){window[p].apply(r,[])}}}i=p=null;k=a=r=null};j=j.join("&")+(typeof(o)=="string"?"&"+o:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(n,j,i)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(n+(j.length>0?(n.indexOf("?")>0?"&":"?")+j:""),i)}}return}}else{if(typeof(n.documentElement)=="object"||(typeof(n.tagName)!="undefined"&&typeof(n.getElementsByTagName)!="undefined"&&n.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){m=this[this._dhxdataload.xmlToJson].apply(this,[n])}else{m=window.dhx4._copyObj(n)}}if(m!=null){this[this._dhxdataload.initObj].apply(this,[m])}if(p!=null){if(typeof(p)=="function"){p.apply(this,[])}else{if(typeof(window[p])=="function"){window[p].apply(this,[])}}p=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}function dhtmlXTreeView(d){var e=this;if(typeof(d)=="object"&&d.tagName==null){}else{d={parent:d,clear:true}}this.base=(typeof(d.parent)=="string"?document.getElementById(d.parent):d.parent);if(this.base!=document.body){while(this.base.childNodes.length>0){this.base.removeChild(this.base.lastChild)}}this.conf={skin:(d.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtreeview")||"material"),tree_id:window.dhx4.newId(),ofs:{w:1,h:0},adjust_base:false,icons:this.icons[(typeof(d.iconset)=="string"&&this.icons[d.iconset]!=null&&this.icons[d.iconset].r==true?d.iconset:"tree_native")],autoload:{url:null,mode:"id"},selected:{},ud:{},idx:{sign:0,icon:1,text:2},silent:false,is_mac:(navigator.platform.match(/^mac/i)!=null&&typeof(window.addEventListener)=="function"),mac_cmd_key:false};this.setSkin(this.conf.skin);this.cont=document.createElement("DIV");this.cont.className="dhxtreeview_cont";this.base.appendChild(this.cont);this.area=document.createElement("DIV");this.area.className="dhxtreeview_area";this.cont.appendChild(this.area);this.cont.onclick=function(a){a=a||event;e.callEvent("_onTreeClick",[a,{stop:false}])};this.cont.ondblclick=function(f){f=f||event;var a=(f.target||f.srcElement);if(a.className.match(/dhxtreeview_item_label/)!=null){e._openCloseItem(a.parentNode.parentNode._itemId,true)}};this.items={};this._addItem=function(m,h,j,f){var l=(h!=null?this.items[h].level+1:1);var g=document.createElement("DIV");g.className="dhxtreeview_item";g.innerHTML="<div class='dhxtreeview_item_text'></div>";if(f!=null&&f<0){j.index=0}if(h==null){var i=this.area}else{var a=this.items[h].kids;if(a==false){this._initKidsNode(h)}this.items[h].kids_request=false;var i=this.items[h].item.lastChild.firstChild}if(f!=null&&i.childNodes[f]!=null){i.insertBefore(g,i.childNodes[f])}else{i.appendChild(g)}i=null;g._itemId=m;g._treeId=this.conf.tree_id;if(window.dhx4.isIE==true){g.onselectstart=function(k){k=k||event;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}}}this.items[m]={id:m,pId:h,treeId:this.conf.tree_id,text:j.text,item:g,level:l,kids:false,opened:window.dhx4.s2b(j.open),userdata:window.dhx4._copyObj(j.userdata||{}),half_opened:false};this.callEvent("_onItemRendered",[m,j]);g.firstChild.innerHTML=this._getItemHtml(m);g=null;if(window.dhx4.s2b(j.select)==true){this._setSelected(m,true)}this.callEvent("_onItemInited",[m,j])};this.addItem=function(h,f,g,a){if(this.items[h]!=null){return}if(g!=null&&this.items[g]==null){g=null}this._addItem(h,g,{text:f},a);this._callPublicEvent("onAddItem",[h,f,g,a])};this._removeSingleItem=function(g){if(window.dhx4.isIE==true){this.items[g].item.onselectstart=null}this.items[g].item.parentNode.removeChild(this.items[g].item);for(var f in this.items[g]){this.items[g][f]=null;delete this.items[g][f]}delete this.items[g];if(this.conf.selected[g]==true){delete this.conf.selected[g]}};this._removeItem=function(g){for(var f in this.items){if(this.items[f].pId==g){this._removeItem(f)}}if(g!=null){this._removeSingleItem(g)}};this.deleteItem=function(a){if(this.items[a]==null){return}if(!this._callPublicEvent("onBeforeDeleteItem",[a])){return}this._removeItem(a);this._callPublicEvent("onDeleteItem",[a])};this.clearAll=function(){this._removeItem(null);if(this.conf.unloading!=true){this._fixAreaWidth()}};this._initKidsNode=function(f){var a;if(this.items[f].item.lastChild.className.match(/dhxtreeview_kids_cont/)==null){a=document.createElement("DIV");a.className="dhxtreeview_kids_cont";a.innerHTML="<div style='position:relative;'></div>";a.style.opacity="1";if(this.items[f].opened!=true){if(this.conf.transProp!=false){a.style.height="0px";a.style.opacity="0";a.firstChild.style.display="none"}else{a.style.display="none"}}this.items[f].item.appendChild(a)}this.items[f].kids=true;this._iconUpdate(f);this._signUpdate(f);a=null};this._clearKidsNode=function(a){if(this.items[a].item.lastChild.className.match(/dhxtreeview_kids_cont/)!=null){this.items[a].item.removeChild(this.items[a].item.lastChild)}this.items[a].kids=false;this._iconUpdate(a);this._signUpdate(a)};this.openItem=function(f,a){if(this.items[f].opened!=true){if(typeof(a)=="undefined"){a=true}this._openCloseItem(f,a)}};this.closeItem=function(f,a){if(this.items[f].opened==true){if(typeof(a)=="undefined"){a=true}this._openCloseItem(f,a)}};this._openCloseItem=function(f,a){if(this.callEvent("_onBeforeOpen",[f])!==true){return}if(!(this.items[f].kids==true||this.items[f].kids_request==true)){return false}if(this.items[f].half_opened==true){this.items[f].half_opened=false;this._signUpdate(f);return}if(a&&this.conf.transProp!=false){if(!this.items[f].transEv){this.items[f].item.lastChild.addEventListener(this.conf.transEv,this._doOnTrEnd);this.items[f].transEv=true}if(this.items[f].opened==true){this.items[f].transMode="close";this.items[f].item.lastChild.style.overflow="hidden";this.items[f].item.lastChild.style.height=this.items[f].item.lastChild.childNodes[0].offsetHeight+"px";window.setTimeout(function(){e.items[f].item.lastChild.style[e.conf.transProp]=e.conf.transValueHeight;e.items[f].item.lastChild.style.height="0px";e.items[f].item.lastChild.style.opacity="0";e.items[f].opened=false;e._iconUpdate(f);e._signUpdate(f)},50)}else{this.items[f].transMode="open";this.items[f].item.lastChild.style[this.conf.transProp]=this.conf.transValueHeight;this.items[f].item.lastChild.childNodes[0].style.display="";this.items[f].item.lastChild.style.overflow="hidden";this.items[f].item.lastChild.style.height=this.items[f].item.lastChild.childNodes[0].offsetHeight+"px";this.items[f].item.lastChild.style.opacity="1";this.items[f].opened=true;this._iconUpdate(f);this._signUpdate(f)}}else{this.items[f].opened=!this.items[f].opened;this.items[f].item.lastChild.style.display=(this.items[f].opened==true?"":"none");this.items[f].item.lastChild.childNodes[0].style.display=this.items[f].item.lastChild.style.display;this.items[f].item.lastChild.style.height=(this.items[f].opened==true?"":"0px");this.items[f].item.lastChild.style.opacity=(this.items[f].opened==true?1:0);this._iconUpdate(f);this._signUpdate(f);this._fixAreaWidth()}};this._doOnTrEnd=function(){var a=this.parentNode._itemId;e.items[a].item.lastChild.style[e.conf.transProp]="";if(e.items[a].transMode=="close"){e.items[a].item.lastChild.childNodes[0].style.display="none"}else{e.items[a].item.lastChild.style.height="";e.items[a].item.lastChild.style.overflow=""}e._fixAreaWidth()};this.setSizes=function(){if(this.conf.adjust_base==true){this.base.style.width=this.base.parentNode.clientWidth-2+"px";this.base.style.height=this.base.parentNode.clientHeight-2+"px"}this.cont.style.left=this.conf.ofs.w+"px";this.cont.style.top=this.conf.ofs.h+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.w*2+"px";this.cont.style.height=this.base.clientHeight-this.conf.ofs.h*2+"px";this._fixAreaWidth()};this._fixAreaWidth=function(a){this.area.style.width="100%";if(this.cont.scrollWidth!=this.cont.clientWidth){this.area.style.width=this.cont.scrollWidth+1+"px"}if(window.dhx4.isIE7==true&&a!==false){window.setTimeout(function(){e._fixAreaWidth(false)},1)}};this.setSizes();dhx4._eventable(this);var c=window.dhx4.transDetect();this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.transValueHeight="height 0.15s";c=null;if(this.conf.is_mac==true){this._macOnKey=function(a){if(((window.dhx4.isKHTML||window.dhx4.isChrome||window.dhx4.isOpera)&&(a.keyCode==91||a.keyCode==93))||(window.dhx4.isFF&&a.keyCode==224)){e.conf.mac_cmd_key=(a.type=="keydown")}};window.addEventListener("keydown",this._macOnKey,false);window.addEventListener("keyup",this._macOnKey,false)}for(var b in this.modules){if(this.modules[b].init!=null){this[this.modules[b].init](d)}}this.unload=function(){this.conf.unloading=true;this.cont.onclick=null;this.cont.ondblclick=null;this.clearAll();if(this.conf.is_mac==true){window.removeEventListener("keydown",this._macOnKey,false);window.removeEventListener("keyup",this._macOnKey,false)}for(var f in this.modules){if(this.modules[f].unload!=null){this[this.modules[f].unload]()}}this.area.parentNode.removeChild(this.area);this.area=null;this.cont.parentNode.removeChild(this.cont);this.cont=null;this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"");window.dhx4._eventable(this,"clear");for(var f in this){this[f]=null}e=null};if(d.items!=null||d.json!=null||d.xml!=null){this.loadStruct(d.items||d.json||d.xml,d.onload)}return this}dhtmlXTreeView.prototype.modules={};dhtmlXTreeView.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"")+" dhxtreeview_"+a;this.conf.skin=a;this.conf.icon_width=dhx4.readFromCss("dhxtreeview_"+this.conf.skin+" dhxtreeview_icon_width");this.conf.ofs=(this.conf.skin=="dhx_skyblue"?{w:1,h:0}:{w:0,h:0})};dhtmlXTreeView.prototype.setItemText=function(b,a){if(this.items[b]!=null){this.items[b].text=a;this.items[b].item.firstChild.childNodes[this.conf.idx.text].innerHTML=a;this._callPublicEvent("onTextChange",[b,a])}};dhtmlXTreeView.prototype.getItemText=function(a){return this.items[a].text};dhtmlXTreeView.prototype.getParentId=function(a){return this.items[a].pId};dhtmlXTreeView.prototype.getSubItems=function(d){var c=[];for(var b in this.items){if(this.items[b].pId==d){c.push(b)}}return c};dhtmlXTreeView.prototype._refreshItemHtml=function(c,a,b){this.items[c].item.firstChild.innerHTML=this._getItemHtml(c);if(a==true){this._signUpdate(c)}if(b==true){this._iconUpdate(c)}};dhtmlXTreeView.prototype._getItemHtml=function(f){var c=[];var e=0;for(var b in this.conf.idx){var d=this["_itemHtml_"+b](f,e);if(d.nodeText!==false){c.push(d.nodeText);e+=d.nodeIndex}}return c.join("")};dhtmlXTreeView.prototype._getIconOfs=function(b,a){return((this.items[b].level-1+a)*this.conf.icon_width)};dhtmlXTreeView.prototype._itemHtml_text=function(b,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_label' style='left:"+this._getIconOfs(b,a)+"px;'>"+this.items[b].text+"</div>"}};dhtmlXTreeView.prototype.setUserData=function(d,a,c){var b=this.items[d];if(b){b.userdata[a]=c}};dhtmlXTreeView.prototype.getUserData=function(c,a){var b=this.items[c];if(b&&!a){return b.userdata}return b?(b.userdata[a]||null):null};dhtmlXTreeView.prototype.silent=function(a){this.conf.silent=true;if(typeof(a)=="function"){a.apply(window,[this])}this.conf.silent=false};dhtmlXTreeView.prototype._callPublicEvent=function(){return(this.conf.silent==false?this.callEvent.apply(this,arguments):true)};if(typeof(window.dhtmlXCellObject)=="function"){dhtmlXCellObject.prototype.attachTreeView=function(c){this.callEvent("_onBeforeContentAttach",["treeview"]);var e=document.createElement("DIV");e.style.position="relative";e.style.overflow="hidden";e.style.width="100%";e.style.height="100%";this._attachObject(e);var d={parent:e,skin:this.conf.skin};if(c!=null&&typeof(c)=="object"){for(var b in c){if(typeof(d[b])=="undefined"){d[b]=c[b]}}}this.dataType="treeview";this.dataObj=new dhtmlXTreeView(d);if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){e.className+=" dhxtreeview_with_border";this.dataObj.conf.adjust_base=true;this.dataObj.setSizes()}d.parent=null;d=e=c=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXTreeView.prototype.modules.chbx={init:"_chbxInit"};dhtmlXTreeView.prototype.enableCheckboxes=function(c){c=(c==true);if(this.conf.enable_chbx!=c){this.conf.enable_chbx=c;this._chbxUpdIndex();for(var b in this.items){this._refreshItemHtml(b,true,true)}}};dhtmlXTreeView.prototype.getAllChecked=function(a){return this._chbxGetCheckedBranch(a,true)};dhtmlXTreeView.prototype.getAllUnchecked=function(a){return this._chbxGetCheckedBranch(a,false)};dhtmlXTreeView.prototype.checkItem=function(a){this._chbxSetChecked(a,true,true)};dhtmlXTreeView.prototype.uncheckItem=function(a){this._chbxSetChecked(a,false,true)};dhtmlXTreeView.prototype.isItemChecked=function(a){if(this.items[a]==null){return null}return(this.items[a].checked==true)};dhtmlXTreeView.prototype.enableCheckbox=function(a){this._chbxSetEnabled(a,true)};dhtmlXTreeView.prototype.disableCheckbox=function(a){this._chbxSetEnabled(a,false)};dhtmlXTreeView.prototype.isCheckboxEnabled=function(a){return(this.items[a].chbx_enabled==true)};dhtmlXTreeView.prototype.showCheckbox=function(a){this._chbxSetVisible(a,true)};dhtmlXTreeView.prototype.hideCheckbox=function(a){this._chbxSetVisible(a,false)};dhtmlXTreeView.prototype.isCheckboxVisible=function(a){return(this.items[a].chbx_visible==true)};dhtmlXTreeView.prototype._chbxInit=function(a){this.enableCheckboxes(a.checkboxes);this.attachEvent("_onItemRendered",function(d,c){this.items[d].checked=window.dhx4.s2b(c.checked);var b=(c.checkbox||"enabled,visible");this.items[d].chbx_enabled=(b.match(/disabled/)==null);this.items[d].chbx_visible=(b.match(/hidden/)==null)});this.attachEvent("_onTreeClick",function(d,b){if(this.conf.enable_chbx!=true){return}var c=(d.target||d.srcElement);if(c.tagName.toLowerCase()=="i"){c=c.parentNode}if((c.parentNode.className||"").match(/dhxtreeview_item_text/)!=null&&c==c.parentNode.childNodes[this.conf.idx.chbx]){var f=c.parentNode.parentNode._itemId;if(this.items[f].chbx_enabled==true){this._chbxSetChecked(f,!this.items[f].checked,true)}b.stop=true}});a=null};dhtmlXTreeView.prototype._itemHtml_chbx=function(c,b){var a={nodeIndex:0,nodeText:false};if(this.conf.enable_chbx==true){if(this.items[c].chbx_visible==true){a.nodeIndex=1}a.nodeText="<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(c,b)+"px;"+(a.nodeIndex>0?"":"display:none;")+"'>"+this._chbxGenIcon(c)+"</div>"}return a};dhtmlXTreeView.prototype._chbxSetChecked=function(b,a){if(this.conf.enable_chbx!=true){return}a=(a==true);if(this.items[b].checked!=a){if(this._callPublicEvent("onBeforeCheck",[b,(this.items[b].checked==true)])!==true){return}this.items[b].checked=a;this.items[b].item.childNodes[0].childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(b);this._callPublicEvent("onCheck",[b,a])}};dhtmlXTreeView.prototype._chbxSetEnabled=function(b,a){if(this.items[b].chbx_enabled!=a){this.items[b].chbx_enabled=a;this.items[b].item.firstChild.childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(b)}};dhtmlXTreeView.prototype._chbxSetVisible=function(b,a){if(this.items[b].chbx_visible!=a){this.items[b].chbx_visible=a;this._refreshItemHtml(b,true,true)}};dhtmlXTreeView.prototype._chbxGenIcon=function(b){var a=this.conf.icons["chbx_"+(this.items[b].chbx_enabled?"":"dis_")+(this.items[b].checked?"1":"0")];return'<i class="'+this.conf.icons.prefix+" "+a+'"></i>'};dhtmlXTreeView.prototype._chbxUpdIndex=function(){if(this.conf.enable_chbx==true){this.conf.idx={sign:0,chbx:1,icon:2,text:3}}else{this.conf.idx={sign:0,icon:1,text:2}}};dhtmlXTreeView.prototype._chbxGetCheckedBranch=function(d,e){var c=[];for(var b in this.items){if(this.items[b].pId==d){if(this.items[b].checked==e){c.push(b)}if(this.items[b].kids==true){c=c.concat(this._chbxGetCheckedBranch(b,e))}}}return c};dhtmlXTreeView.prototype.modules.sign={init:"_signInit"};dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(c,a){if(a.stop==true){return}var b=(c.target||c.srcElement);if(b.tagName.toLowerCase()=="i"){b=b.parentNode}if((b.parentNode.className||"").match(/dhxtreeview_item_text/)!=null&&b==b.parentNode.childNodes[this.conf.idx.sign]){this._openCloseItem(b.parentNode.parentNode._itemId,true);a.stop=true}})};dhtmlXTreeView.prototype._signUpdate=function(c){var b=this.items[c];var a=b.item.childNodes[0].childNodes[this.conf.idx.sign];if(b.kids==true||b.kids_request==true){a.innerHTML='<i class="'+this.conf.icons.prefix+" "+this.conf.icons[(b.opened||b.half_opened?"minus":"plus")]+'"></i>'}else{a.innerHTML=""}b=a=null};dhtmlXTreeView.prototype._itemHtml_sign=function(b,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(b,a)+"px;'></div>"}};dhtmlXTreeView.prototype.modules.selection={init:"_selectionInit"};dhtmlXTreeView.prototype.selectItem=function(e){if(this.conf.msel==true){var c={};if(!(e instanceof Array)){e=[e]}for(var d=0;d<e.length;d++){c[e[d]]=true}for(var b in this.conf.selected){if(c[b]==true){delete c[b]}else{this._setSelected(b,false)}}for(var b in c){this._setSelected(b,true)}}else{if(e!=null&&this.conf.selected[e]!=true&&!(e instanceof Array)){if(this._clearSelection(e)==false){this._setSelected(e,true)}}}};dhtmlXTreeView.prototype.unselectItem=function(b){if(this.conf.msel==true){if(!(b instanceof Array)){b=[b]}for(var a=0;a<b.length;a++){if(this.conf.selected[b[a]]==true){this._setSelected(b[a],false)}}}else{if(b!=null){this._setSelected(b,false)}}};dhtmlXTreeView.prototype.getSelectedId=function(){var c=[];for(var b in this.conf.selected){c.push(b)}return(this.conf.msel?c:(c[0]||null))};dhtmlXTreeView.prototype.enableMultiselect=function(a){a=(a==true);if(this.conf.msel!=a){this._clearSelection();this.conf.msel=a}};dhtmlXTreeView.prototype._selectionInit=function(a){this.conf.msel=window.dhx4.s2b(a.multiselect);this.attachEvent("_onTreeClick",function(f,b){if(b.stop==true){return}var d=(f.target||f.srcElement);if(d.tagName.toLowerCase()=="i"){d=d.parentNode}var c=null;if(d.className.match(/dhxtreeview_item_label/)!=null){c=d.parentNode.parentNode._itemId}else{if(d.className.match(/^dhxtreeview_item_text/)!=null){c=d.parentNode._itemId}else{if(d.className.match(/^dhxtreeview_item_icon/)!=null){c=d.parentNode.parentNode._itemId}}}if(c!=null){if(this.conf.msel==true){if((f.ctrlKey==true||this.conf.mac_cmd_key==true)&&f.shiftKey==false&&f.altKey==false){this._setSelected(c,!this._isSelected(c))}else{if(f.ctrlKey==false&&f.shiftKey==false&&f.altKey==false&&this.conf.mac_cmd_key==false){if(this._clearSelection(c)==false){this._setSelected(c,true)}}}}else{if(this._clearSelection(c)==false){this._setSelected(c,true)}}}})};dhtmlXTreeView.prototype._setSelected=function(b,a){if(a==true){if(this.conf.selected[b]!=true){this.items[b].item.childNodes[0].className+=" dhxtreeview_item_text_selected";this.conf.selected[b]=true;this._callPublicEvent("onSelect",[b,true])}}else{if(this.conf.selected[b]==true){this.items[b].item.childNodes[0].className=String(this.items[b].item.childNodes[0].className).replace(/\s*dhxtreeview_item_text_selected/gi,"");delete this.conf.selected[b];this._callPublicEvent("onSelect",[b,false])}}};dhtmlXTreeView.prototype._clearSelection=function(d){var c=false;for(var b in this.conf.selected){if(d!=null&&b==d){c=true}else{this._setSelected(b,false)}}return c};dhtmlXTreeView.prototype._isSelected=function(a){return(this.conf.selected[a]==true)};dhtmlXTreeView.prototype.modules.icons={init:"_iconModuleInit"};dhtmlXTreeView.prototype.setItemIcons=function(d,c){if(c==null&&this.items[d].icons!=null){delete this.items[d].icons}else{if(c!=null){if(this.items[d].icons==null){this.items[d].icons={}}for(var b in c){if(c[b]!=null){this.items[d].icons[b]=c[b]}else{if(c[b]==null&&this.items[d].icons[b]!=null){delete this.items[d].icons[b]}}}}}this._iconUpdate(d)};dhtmlXTreeView.prototype.setIconColor=function(c,a){var b=this.items[c].item.firstChild.childNodes[this.conf.idx.icon].firstChild;if(a==null){if(this.items[c].icon_color!=null){delete this.items[c].icon_color;b.style.color="inherit"}}else{if(this.items[c].icon_color!=a){this.items[c].icon_color=a;b.style.color=a}}b=null};dhtmlXTreeView.prototype.setIconset=function(a){if(this.icons[a]!=null&&this.icons[a].r==true){this.conf.icons=this.icons[a]}};dhtmlXTreeView.prototype._iconModuleInit=function(){this.attachEvent("_onItemRendered",function(b,a){if(a.icons!=null){this.items[b].icons=a.icons}if(a.icon_color!=null){this.items[b].icon_color=a.icon_color}})};dhtmlXTreeView.prototype._iconConf=function(d){var c=this.items[d].icons||{};for(var b in {folder_opened:1,folder_closed:1,file:1}){if(typeof(c[b])=="undefined"){c[b]=this.conf.icons[b]}}return c};dhtmlXTreeView.prototype._iconHtml=function(c,b){var a=['class="'+this.conf.icons.prefix+" "+b+'"'];if(this.items[c].icon_color!=null){a.push('style="color:'+this.items[c].icon_color+';"')}return"<i "+a.join(" ")+"></i>"};dhtmlXTreeView.prototype._itemHtml_icon=function(b,a){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(b,a)+"px;'>"+this._iconHtml(b,this._iconConf(b).file)+"</div>"}};dhtmlXTreeView.prototype._iconUpdate=function(d){var c=this.items[d];var b=this._iconConf(d);var a=(c.kids==true||c.kids_request==true?b[c.opened?"folder_opened":"folder_closed"]:b.file);c.item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML=this._iconHtml(d,a);c=null};dhtmlXTreeView.prototype.icons={tree_native:{r:true,prefix:"dhxtreeview_icon",plus:"dhxtreeview_icon_plus",minus:"dhxtreeview_icon_minus",file:"dhxtreeview_icon_file",folder_opened:"dhxtreeview_icon_folder_opened",folder_closed:"dhxtreeview_icon_folder_closed",loading:"dhxtreeview_icon_loading",chbx_0:"dhxtreeview_icon_chbx_0",chbx_1:"dhxtreeview_icon_chbx_1",chbx_dis_0:"dhxtreeview_icon_chbx_dis_0",chbx_dis_1:"dhxtreeview_icon_chbx_dis_1"},font_awesome:{r:(!(window.dhx4.isIE6==true||window.dhx4.isIE7==true)),prefix:"fa",plus:"fa-caret-right",minus:"fa-caret-down",file:"fa-file-o",folder_opened:"fa-folder-open-o",folder_closed:"fa-folder-o",loading:"fa-refresh fa-spin",chbx_0:"fa-square-o",chbx_1:"fa-check-square-o",chbx_dis_0:"fa-square-o dhx-disabled",chbx_dis_1:"fa-check-square-o dhx-disabled"}};dhtmlXTreeView.prototype.modules.loading={init:"_loadingInit",unload:"_loadingUnload"};dhtmlXTreeView.prototype._loadingInit=function(a){window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tree",{struct:true});this.conf.root_id=(typeof(a.root_id)=="undefined"||a.root_id==null?"0":a.root_id);this._dhxdataload.onBeforeXLS=function(b){if(this.conf.autoload.url==null){this.conf.autoload.url=b}return{url:b.replace(/\{id\}/gi,this.conf.root_id)}}};dhtmlXTreeView.prototype._loadingUnload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear")};dhtmlXTreeView.prototype._initObj=function(e,a,b,c){for(var d=0;d<e.length;d++){var f=e[d].id;if(f==null){f="dhxtreeview_id_"+window.dhx4.newId()}if(this.items[f]==null){this._addItem(f,b,e[d])}if(e[d].items!=null){this._initObj(e[d].items,null,f,true)}}if(c!=true){this._fixAreaWidth()}};dhtmlXTreeView.prototype._xmlToObj=function(h,g){if(g!=true){h=h.getElementsByTagName("tree")[0]}var d=[];for(var b=0;b<h.childNodes.length;b++){var c=h.childNodes[b];if((c.tagName||"").toLowerCase()=="item"){var j={};for(var i=0;i<c.attributes.length;i++){j[c.attributes[i].name]=c.attributes[i].value}if(c.childNodes.length>0){var g=this._xmlToObj(c,true);if(g.length>0){j.items=g}for(var i=0;i<c.childNodes.length;i++){var k=(c.childNodes[i].tagName||"").toLowerCase();if({icons:1,userdata:1}[k]==1){if(j[k]==null){j[k]={}}for(var f=0;f<c.childNodes[i].attributes.length;f++){var a=c.childNodes[i].attributes[f].name;if(j[k][a]==null){j[k][a]=c.childNodes[i].attributes[f].value}}}n2=null}}d.push(j)}c=null}return d};dhtmlXTreeView.prototype.modules.dnd={init:"_dndInit",unload:"_dndUnload"};dhtmlXTreeView.prototype.enableDragAndDrop=function(a){this.conf.enable_dnd=window.dhx4.s2b(a)};dhtmlXTreeView.prototype._dndInit=function(a){var b=this;this.enableDragAndDrop(a.dnd);this.conf.dnd=null;this._dndOnMouseDown=function(h){if(b.conf.enable_dnd!=true){return}h=h||event;if(typeof(h.button)!="undefined"&&h.button>=2){return false}var i=null;var g=null;var f=h.target||h.srcElement;var d=window.dhx4.absLeft(f)+(typeof(h.offsetX)=="undefined"?h.layerX:h.offsetX)-h.clientX;var c=window.dhx4.absTop(f)+(typeof(h.offsetY)=="undefined"?h.layerY:h.offsetY)-h.clientY;while(f!=null&&f!=b.cont){if((f.className||"").match(/dhxtreeview_item/)!=null&&f._itemId!=null){i=f._itemId;g=f._treeId;f=null}else{f=f.parentNode}}f=null;if(i==null){return}b.conf.dnd={inited:false,id:i,treeId:g,selected:(b.conf.selected[i]==true),tid:null,drop:{},x:h.clientX,y:h.clientY,ofs_x:d,ofs_y:c,zi:window.dhx4.newId(),scroll:false,scroll_ofs:5,scroll_time:30,scroll_tm:null,kids:{},idx:{}};b._dndInitEvents()};this._dndOnMouseMove=function(l){l=l||event;if(b.conf.dnd.inited!=true){if(Math.abs(b.conf.dnd.x-l.clientX)>=15||Math.abs(b.conf.dnd.y-l.clientY)>=15){if(b._callPublicEvent("onBeforeDrag",[b.conf.dnd.id])!==true){return}b.conf.dnd.inited=true;b.cont.className+=" dhxtreeview_dnd_mode";b._dndInitDraggedObj();b._dndCollectKids(b.conf.dnd.id);b._dndCollectIndexes(b.area);if(b._clearSelection(b.conf.dnd.id)==false){b._setSelected(b.conf.dnd.id,true)}b.items[b.conf.dnd.id].item.className+=" dhxtreeview_item_dragged";document.body.className+=" dhxtreeview_dnd_mode";b.conf.dnd.cont={x1:window.dhx4.absLeft(b.base),y1:window.dhx4.absTop(b.base)};b.conf.dnd.cont.x2=b.conf.dnd.cont.x1+b.base.offsetWidth;b.conf.dnd.cont.y2=b.conf.dnd.cont.y1+b.base.offsetHeight}else{return}}b.conf.dnd.x=l.clientX;b.conf.dnd.y=l.clientY;b._dndAdjustDraggedObj();var f=true;if(b.cont.scrollHeight>b.cont.clientHeight){if(b.conf.dnd.x>=b.conf.dnd.cont.x1&&b.conf.dnd.x<=b.conf.dnd.cont.x2){if(b.cont.scrollTop>0&&b.conf.dnd.y>=b.conf.dnd.cont.y1&&b.conf.dnd.y<=b.conf.dnd.cont.y1+10){b._dndScroll("up");f=false}else{if(b.cont.scrollTop+b.cont.clientHeight<b.cont.scrollHeight&&b.conf.dnd.y<=b.conf.dnd.cont.y2&&b.conf.dnd.y>=b.conf.dnd.cont.y2-10){b._dndScroll("down");f=false}}}}if(f==true&&b.conf.dnd.scroll==true){b._dndScroll("stop")}var n=(l.target||l.srcElement);if(n.parentNode!=null&&(n.parentNode.className||"").match(/dhxtreeview_kids_cont/)!=null){n=null;return}var c=false;var g=null;var k=null;if(n.className!=null){if(n.className.match(/dhxtreeview_item_[li]/)!=null){g=n.parentNode.parentNode._itemId;k=n.parentNode.parentNode._treeId}else{if(n.className.match(/dhxtreeview_item_[t]/)!=null){g=n.parentNode._itemId;k=n.parentNode._treeId}}}if(g!=null&&k!=b.conf.dnd.treeId){return}if(b.conf.dnd.id==g||b.conf.dnd.kids[g]==true){g=null}if(g!=null){var i=b.items[g].item.firstChild.offsetHeight;var m=Math.max(Math.floor(Math.min(l.layerY||l.offsetY,i)*3/i),0);if(m==0){if(b.items[g].item.previousSibling==b.items[b.conf.dnd.id].item){m=null}}else{if(m==1){if(b.items[b.conf.dnd.id].pId==g){m=null}else{if(b.items[g].kids==true&&b.items[g].item.lastChild.firstChild.firstChild==b.items[b.conf.dnd.id].item){m=null}else{if(b.items[g].opened==false){}}}}else{if(m==2){if(b.items[g].opened==true){m=null}else{if(b.items[g].item.nextSibling==b.items[b.conf.dnd.id].item){m=null}}}}}if(m!=b.conf.dnd.ofs){b.conf.dnd.ofs=m;c=true}}if(g!=b.conf.dnd.tid){if(b.conf.dnd.tid!=null){b._dndUpdateTargetCss(b.conf.dnd.tid,false)}if(g!=null){c=true}b.conf.dnd.tid=g}if(c==true){var j=false;if(m!=null){var d={id:b.conf.dnd.id,pId:b.items[g].pId||null,index:null,idxOfs:(b.items[b.conf.dnd.id].pId==b.items[g].pId&&b.conf.dnd.idx[b.conf.dnd.id]<b.conf.dnd.idx[g]?-1:0)};if(m==0||m==2){d.index=b.conf.dnd.idx[g]+(m==2?1:0)+d.idxOfs}else{if(m==1){d.pId=g;d.index=(b.items[g].item.lastChild.className.match(/dhxtreeview_kids_cont/)==null?0:b.items[g].item.lastChild.firstChild.childNodes.length)}}if(b.conf.dnd.drop.id!=d.id||b.conf.dnd.drop.pId!=d.pId||b.conf.dnd.drop.index!=d.index){b.conf.dnd.drop=d;if(b._callPublicEvent("onDragOver",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index])===true){j=true}}}if(j!=true){b.conf.dnd.ofs=m=null}b._dndUpdateTargetCss(g,j)}};this._dndOnMouseUp=function(j){j=j||event;if(typeof(j.button)!="undefined"&&j.button>=2){return}b._dndUnloadEvents();b._dndUnloadDraggedObj();if(b.conf.dnd.scroll==true){b._dndScroll("stop")}if(b.cont.className.match(/dhxtreeview_dnd_mode/gi)!=null){b.cont.className=String(b.cont.className).replace(/\s*dhxtreeview_dnd_mode/gi,"")}if(b.conf.dnd.tid!=null){b._dndUpdateTargetCss(b.conf.dnd.tid,false)}if(b.conf.dnd.inited==true){b.items[b.conf.dnd.id].item.className=String(b.items[b.conf.dnd.id].item.className).replace(/\s*dhxtreeview_item_dragged/gi,"");document.body.className=String(document.body.className).replace(/\s*dhxtreeview_dnd_mode/,"");if(b.conf.dnd.tid!=null&&b.conf.dnd.ofs!=null){if(b._callPublicEvent("onBeforeDrop",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index])===true){var i=b.items[b.conf.dnd.id];var d=b.items[b.conf.dnd.tid];var f=(i.pId!=null?b.items[i.pId]:null);var h;if(b.conf.dnd.ofs==1){var g=false;if(d.kids==false){b._initKidsNode(d.id);g=true}d.item.lastChild.firstChild.appendChild(i.item);if(g==true){b._openCloseItem(d.id,false)}i.pId=d.id;h=d.level+1-i.level}else{if(b.conf.dnd.ofs==0||b.conf.dnd.ofs==2){if(b.conf.dnd.ofs==0){d.item.parentNode.insertBefore(i.item,d.item)}else{if(d.item.nextSibling!=null){d.item.parentNode.insertBefore(i.item,d.item.nextSibling)}else{d.item.parentNode.appendChild(i.item)}}i.pId=d.pId;h=d.level-i.level}}if(h!=0){b.conf.dnd.kids[i.id]=true;for(var c in b.conf.dnd.kids){b.items[c].level+=h;b._refreshItemHtml(c,(b.items[c].kids==true),true)}}if(f!=null&&f.kids==true&&f.item.lastChild.firstChild.childNodes.length==0){b._clearKidsNode(f.id);f.opened=false}i=d=f=null;b._fixAreaWidth();b._callPublicEvent("onDrop",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index])}}}window.dhx4.zim.clear(b.conf.dnd.zi);b.conf.dnd=null};this._dndOnContextMenu=function(c){if(b.conf.dnd.inited==true){c=c||event;c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}c.returnValue=false;return false}};this._dndInitEvents=function(){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._dndOnMouseMove,false);window.addEventListener("mouseup",this._dndOnMouseUp,false);window.addEventListener("contextmenu",this._dndOnContextMenu,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove);document.body.attachEvent("onmouseup",this._dndOnMouseUp);document.body.attachEvent("oncontextmenu",this._dndOnContextMenu)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._dndOnMouseMove,false);window.removeEventListener("mouseup",this._dndOnMouseUp,false);window.removeEventListener("contextmenu",this._dndOnContextMenu,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove);document.body.detachEvent("onmouseup",this._dndOnMouseUp);document.body.detachEvent("oncontextmenu",this._dndOnContextMenu)}};this._dndInitDraggedObj=function(){this.conf.dnd.dragged=document.createElement("DIV");this.conf.dnd.dragged.className="dhxtreeview_dragged_obj_"+this.conf.skin;this.conf.dnd.dragged.style.zIndex=window.dhx4.zim.reserve(this.conf.dnd.zi);document.body.appendChild(this.conf.dnd.dragged);this.conf.dnd.dragged.innerHTML=this.getItemText(this.conf.dnd.id)};this._dndAdjustDraggedObj=function(){this.conf.dnd.dragged.style.left=this.conf.dnd.x+this.conf.dnd.ofs_x+12+"px";this.conf.dnd.dragged.style.top=this.conf.dnd.y+this.conf.dnd.ofs_y+18+"px"};this._dndUnloadDraggedObj=function(){if(this.conf.dnd.dragged!=null){document.body.removeChild(this.conf.dnd.dragged);this.conf.dnd.dragged=null}};this._dndUpdateTargetCss=function(f,e){var d=this.items[f].item.childNodes[0];if(this.conf.dnd.ofs==null){e=false}if(e==true){d.className=String(d.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs);if(d.nextSibling==null||d.nextSibling.className.match(/dhxtreeview_drop_preview/)==null){var c=document.createElement("DIV");c.className="dhxtreeview_drop_preview";c.style.left=d.lastChild.previousSibling.style.left;if(d.nextSibling==null){d.parentNode.appendChild(c)}else{d.parentNode.insertBefore(c,d.nextSibling)}c=null}d.nextSibling.className=String(d.nextSibling.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs)}else{if(d.className.match(/dhxtreeview_drop_\d/)!=null){d.className=String(d.className).replace(/\s*dhxtreeview_drop_\d/gi,"");if(d.nextSibling!=null&&d.nextSibling.className.match(/dhxtreeview_drop_preview/)!=null){d.parentNode.removeChild(d.nextSibling)}}}d=null};this._dndCollectKids=function(d){for(var c in this.items){if(this.items[c].pId==d){this.conf.dnd.kids[c]=true;if(this.items[c].kids==true){this._dndCollectKids(c)}}}};this._dndCollectIndexes=function(c){for(var d=0;d<c.childNodes.length;d++){this.conf.dnd.idx[c.childNodes[d]._itemId]=d;if(c.childNodes[d].lastChild.className.match(/dhxtreeview_kids_cont/)!=null){this._dndCollectIndexes(c.childNodes[d].lastChild.firstChild)}}};this._dndScroll=function(e,d){if(e=="stop"){if(b.conf.dnd.scroll==true){if(b.conf.dnd.scroll_tm){window.clearTimeout(b.conf.dnd.scroll_tm)}b.conf.dnd.scroll=false}return}else{if(b.conf.dnd.scroll==true){if(d!=true){return}}else{b.conf.dnd.scroll=true}var c=false;if(e=="up"){b.cont.scrollTop=Math.max(0,b.cont.scrollTop-b.conf.dnd.scroll_ofs);if(b.cont.scrollTop==0){c=true}}else{b.cont.scrollTop=Math.min(b.cont.scrollHeight-b.cont.clientHeight,b.cont.scrollTop+b.conf.dnd.scroll_ofs);if(b.cont.scrollTop+b.cont.clientHeight==b.cont.scrollHeight){c=true}}if(c!=true){b.conf.dnd.scroll_tm=window.setTimeout(function(){b._dndScroll(e,true)},b.conf.dnd.scroll_time)}}};if(typeof(window.addEventListener)=="function"){this.cont.addEventListener("mousedown",this._dndOnMouseDown,false)}else{this.cont.attachEvent("onmousedown",this._dndOnMouseDown)}this._dndUnload=function(){if(typeof(window.addEventListener)=="function"){this.cont.removeEventListener("mousedown",this._dndOnMouseDown,false)}else{this.cont.detachEvent("onmousedown",this._dndOnMouseDown)}b=null};a=null};dhtmlXTreeView.prototype.modules.ctx={init:"_ctxInit",unload:"_ctxUnload"};dhtmlXTreeView.prototype.enableContextMenu=function(a){this.conf.ctx=window.dhx4.s2b(a)};dhtmlXTreeView.prototype._ctxInit=function(a){var b=this;this._ctxCall=function(f){if(b.conf.ctx!=true){return}f=f||event;var d=(f.target||f.srcElement);if(d.tagName.toLowerCase()=="i"){d=d.parentNode}var h=(d.parentNode._itemId||d.parentNode.parentNode._itemId);var c=window.dhx4.absLeft(d)+(typeof(f.offsetX)=="undefined"?f.layerX:f.offsetX);var g=window.dhx4.absTop(d)+(typeof(f.offsetY)=="undefined"?f.layerY:f.offsetY);if(h!=null&&b._callPublicEvent("onContextMenu",[h,c,g,f])!==true){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;f.returnValue=false;return false}};if(typeof(window.addEventListener)=="function"){this.cont.addEventListener("contextmenu",this._ctxCall,false)}else{this.cont.attachEvent("oncontextmenu",this._ctxCall)}this._ctxUnload=function(){if(typeof(window.addEventListener)=="function"){this.cont.removeEventListener("contextmenu",this._ctxCall,false)}else{this.cont.detachEvent("oncontextmenu",this._ctxCall)}b=null};this.enableContextMenu(a.context_menu)};dhtmlXTreeView.prototype.modules.dynload={init:"_dynLoadInit"};dhtmlXTreeView.prototype._dynLoadInit=function(){this.attachEvent("_onItemInited",function(c,b){this.items[c].kids_request=window.dhx4.s2b(b.kids);if(this.items[c].kids_request==true){this._initKidsNode(c)}if(this.items[c].opened==true&&this.items[c].kids_request==true){var a=this;window.setTimeout(function(){a._dynLoadRequest(c);a=null},100)}});this.attachEvent("_onBeforeOpen",function(a){if(this.items[a].opened!=true&&this.items[a].kids_request==true){if(this._dynLoadRequest(a)!=true){this.items[a].half_opened=true;this._signUpdate(a);return false}}return true})};dhtmlXTreeView.prototype._dynLoadRequest=function(b){if(typeof(this.conf.autoload.mode)=="function"){this.conf.autoload.mode.apply(window,[b]);return true}if(this.conf.autoload.url==null){return}this._dhxdataload.onBeforeXLS=function(c){return{url:c.replace(/\{id\}/gi,b)}};var a=this;this.items[b].kids_loading_tm=window.setTimeout(function(){a._dynLoadUpdateIcon(b,true);a=null},100);this.loadStruct(this.conf.autoload.url,function(){window.clearTimeout(this.items[b].kids_loading_tm);this._dynLoadUpdateIcon(b,false);if(this.items[b].half_opened){this.items[b].half_opened=false;this._openCloseItem(b,true)}});this.items[b].kids_request=false;return false};dhtmlXTreeView.prototype._dynLoadUpdateIcon=function(b,a){this.items[b].loading=(a==true);if(this.items[b].loading==true){this.items[b].item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML="<i class='"+this.conf.icons.prefix+" "+this.conf.icons.loading+"'></i>"}else{this._iconUpdate(b)}};